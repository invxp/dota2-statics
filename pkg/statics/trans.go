package statics

import (
	"encoding/json"
	"github.com/invxp/dota2-statics/internal/util/convert"
)

const (
	heroes = "{\n    \"result\": {\n        \"heroes\": [\n            {\n                \"name\": \"npc_dota_hero_antimage\",\n                \"id\": 1,\n                \"localized_name\": \"敌法师\"\n            },\n            {\n                \"name\": \"npc_dota_hero_axe\",\n                \"id\": 2,\n                \"localized_name\": \"斧王\"\n            },\n            {\n                \"name\": \"npc_dota_hero_bane\",\n                \"id\": 3,\n                \"localized_name\": \"祸乱之源\"\n            },\n            {\n                \"name\": \"npc_dota_hero_bloodseeker\",\n                \"id\": 4,\n                \"localized_name\": \"血魔\"\n            },\n            {\n                \"name\": \"npc_dota_hero_crystal_maiden\",\n                \"id\": 5,\n                \"localized_name\": \"水晶室女\"\n            },\n            {\n                \"name\": \"npc_dota_hero_drow_ranger\",\n                \"id\": 6,\n                \"localized_name\": \"卓尔游侠\"\n            },\n            {\n                \"name\": \"npc_dota_hero_earthshaker\",\n                \"id\": 7,\n                \"localized_name\": \"撼地者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_juggernaut\",\n                \"id\": 8,\n                \"localized_name\": \"主宰\"\n            },\n            {\n                \"name\": \"npc_dota_hero_mirana\",\n                \"id\": 9,\n                \"localized_name\": \"米拉娜\"\n            },\n            {\n                \"name\": \"npc_dota_hero_nevermore\",\n                \"id\": 11,\n                \"localized_name\": \"影魔\"\n            },\n            {\n                \"name\": \"npc_dota_hero_morphling\",\n                \"id\": 10,\n                \"localized_name\": \"变体精灵\"\n            },\n            {\n                \"name\": \"npc_dota_hero_phantom_lancer\",\n                \"id\": 12,\n                \"localized_name\": \"幻影长矛手\"\n            },\n            {\n                \"name\": \"npc_dota_hero_puck\",\n                \"id\": 13,\n                \"localized_name\": \"帕克\"\n            },\n            {\n                \"name\": \"npc_dota_hero_pudge\",\n                \"id\": 14,\n                \"localized_name\": \"帕吉\"\n            },\n            {\n                \"name\": \"npc_dota_hero_razor\",\n                \"id\": 15,\n                \"localized_name\": \"剃刀\"\n            },\n            {\n                \"name\": \"npc_dota_hero_sand_king\",\n                \"id\": 16,\n                \"localized_name\": \"沙王\"\n            },\n            {\n                \"name\": \"npc_dota_hero_storm_spirit\",\n                \"id\": 17,\n                \"localized_name\": \"风暴之灵\"\n            },\n            {\n                \"name\": \"npc_dota_hero_sven\",\n                \"id\": 18,\n                \"localized_name\": \"斯温\"\n            },\n            {\n                \"name\": \"npc_dota_hero_tiny\",\n                \"id\": 19,\n                \"localized_name\": \"小小\"\n            },\n            {\n                \"name\": \"npc_dota_hero_vengefulspirit\",\n                \"id\": 20,\n                \"localized_name\": \"复仇之魂\"\n            },\n            {\n                \"name\": \"npc_dota_hero_windrunner\",\n                \"id\": 21,\n                \"localized_name\": \"风行者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_zuus\",\n                \"id\": 22,\n                \"localized_name\": \"宙斯\"\n            },\n            {\n                \"name\": \"npc_dota_hero_kunkka\",\n                \"id\": 23,\n                \"localized_name\": \"昆卡\"\n            },\n            {\n                \"name\": \"npc_dota_hero_lina\",\n                \"id\": 25,\n                \"localized_name\": \"莉娜\"\n            },\n            {\n                \"name\": \"npc_dota_hero_lich\",\n                \"id\": 31,\n                \"localized_name\": \"巫妖\"\n            },\n            {\n                \"name\": \"npc_dota_hero_lion\",\n                \"id\": 26,\n                \"localized_name\": \"莱恩\"\n            },\n            {\n                \"name\": \"npc_dota_hero_shadow_shaman\",\n                \"id\": 27,\n                \"localized_name\": \"暗影萨满\"\n            },\n            {\n                \"name\": \"npc_dota_hero_slardar\",\n                \"id\": 28,\n                \"localized_name\": \"斯拉达\"\n            },\n            {\n                \"name\": \"npc_dota_hero_tidehunter\",\n                \"id\": 29,\n                \"localized_name\": \"潮汐猎人\"\n            },\n            {\n                \"name\": \"npc_dota_hero_witch_doctor\",\n                \"id\": 30,\n                \"localized_name\": \"巫医\"\n            },\n            {\n                \"name\": \"npc_dota_hero_riki\",\n                \"id\": 32,\n                \"localized_name\": \"力丸\"\n            },\n            {\n                \"name\": \"npc_dota_hero_enigma\",\n                \"id\": 33,\n                \"localized_name\": \"谜团\"\n            },\n            {\n                \"name\": \"npc_dota_hero_tinker\",\n                \"id\": 34,\n                \"localized_name\": \"修补匠\"\n            },\n            {\n                \"name\": \"npc_dota_hero_sniper\",\n                \"id\": 35,\n                \"localized_name\": \"狙击手\"\n            },\n            {\n                \"name\": \"npc_dota_hero_necrolyte\",\n                \"id\": 36,\n                \"localized_name\": \"瘟疫法师\"\n            },\n            {\n                \"name\": \"npc_dota_hero_warlock\",\n                \"id\": 37,\n                \"localized_name\": \"术士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_beastmaster\",\n                \"id\": 38,\n                \"localized_name\": \"兽王\"\n            },\n            {\n                \"name\": \"npc_dota_hero_queenofpain\",\n                \"id\": 39,\n                \"localized_name\": \"痛苦女王\"\n            },\n            {\n                \"name\": \"npc_dota_hero_venomancer\",\n                \"id\": 40,\n                \"localized_name\": \"剧毒术士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_faceless_void\",\n                \"id\": 41,\n                \"localized_name\": \"虚空假面\"\n            },\n            {\n                \"name\": \"npc_dota_hero_skeleton_king\",\n                \"id\": 42,\n                \"localized_name\": \"冥魂大帝\"\n            },\n            {\n                \"name\": \"npc_dota_hero_death_prophet\",\n                \"id\": 43,\n                \"localized_name\": \"死亡先知\"\n            },\n            {\n                \"name\": \"npc_dota_hero_phantom_assassin\",\n                \"id\": 44,\n                \"localized_name\": \"幻影刺客\"\n            },\n            {\n                \"name\": \"npc_dota_hero_pugna\",\n                \"id\": 45,\n                \"localized_name\": \"帕格纳\"\n            },\n            {\n                \"name\": \"npc_dota_hero_templar_assassin\",\n                \"id\": 46,\n                \"localized_name\": \"圣堂刺客\"\n            },\n            {\n                \"name\": \"npc_dota_hero_viper\",\n                \"id\": 47,\n                \"localized_name\": \"冥界亚龙\"\n            },\n            {\n                \"name\": \"npc_dota_hero_luna\",\n                \"id\": 48,\n                \"localized_name\": \"露娜\"\n            },\n            {\n                \"name\": \"npc_dota_hero_dragon_knight\",\n                \"id\": 49,\n                \"localized_name\": \"龙骑士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_dazzle\",\n                \"id\": 50,\n                \"localized_name\": \"戴泽\"\n            },\n            {\n                \"name\": \"npc_dota_hero_rattletrap\",\n                \"id\": 51,\n                \"localized_name\": \"发条技师\"\n            },\n            {\n                \"name\": \"npc_dota_hero_leshrac\",\n                \"id\": 52,\n                \"localized_name\": \"拉席克\"\n            },\n            {\n                \"name\": \"npc_dota_hero_furion\",\n                \"id\": 53,\n                \"localized_name\": \"先知\"\n            },\n            {\n                \"name\": \"npc_dota_hero_life_stealer\",\n                \"id\": 54,\n                \"localized_name\": \"噬魂鬼\"\n            },\n            {\n                \"name\": \"npc_dota_hero_dark_seer\",\n                \"id\": 55,\n                \"localized_name\": \"黑暗贤者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_clinkz\",\n                \"id\": 56,\n                \"localized_name\": \"克林克兹\"\n            },\n            {\n                \"name\": \"npc_dota_hero_omniknight\",\n                \"id\": 57,\n                \"localized_name\": \"全能骑士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_enchantress\",\n                \"id\": 58,\n                \"localized_name\": \"魅惑魔女\"\n            },\n            {\n                \"name\": \"npc_dota_hero_huskar\",\n                \"id\": 59,\n                \"localized_name\": \"哈斯卡\"\n            },\n            {\n                \"name\": \"npc_dota_hero_night_stalker\",\n                \"id\": 60,\n                \"localized_name\": \"暗夜魔王\"\n            },\n            {\n                \"name\": \"npc_dota_hero_broodmother\",\n                \"id\": 61,\n                \"localized_name\": \"育母蜘蛛\"\n            },\n            {\n                \"name\": \"npc_dota_hero_bounty_hunter\",\n                \"id\": 62,\n                \"localized_name\": \"赏金猎人\"\n            },\n            {\n                \"name\": \"npc_dota_hero_weaver\",\n                \"id\": 63,\n                \"localized_name\": \"编织者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_jakiro\",\n                \"id\": 64,\n                \"localized_name\": \"杰奇洛\"\n            },\n            {\n                \"name\": \"npc_dota_hero_batrider\",\n                \"id\": 65,\n                \"localized_name\": \"蝙蝠骑士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_chen\",\n                \"id\": 66,\n                \"localized_name\": \"陈\"\n            },\n            {\n                \"name\": \"npc_dota_hero_spectre\",\n                \"id\": 67,\n                \"localized_name\": \"幽鬼\"\n            },\n            {\n                \"name\": \"npc_dota_hero_doom_bringer\",\n                \"id\": 69,\n                \"localized_name\": \"末日使者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_ancient_apparition\",\n                \"id\": 68,\n                \"localized_name\": \"远古冰魄\"\n            },\n            {\n                \"name\": \"npc_dota_hero_ursa\",\n                \"id\": 70,\n                \"localized_name\": \"熊战士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_spirit_breaker\",\n                \"id\": 71,\n                \"localized_name\": \"裂魂人\"\n            },\n            {\n                \"name\": \"npc_dota_hero_gyrocopter\",\n                \"id\": 72,\n                \"localized_name\": \"矮人直升机\"\n            },\n            {\n                \"name\": \"npc_dota_hero_alchemist\",\n                \"id\": 73,\n                \"localized_name\": \"炼金术士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_invoker\",\n                \"id\": 74,\n                \"localized_name\": \"祈求者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_silencer\",\n                \"id\": 75,\n                \"localized_name\": \"沉默术士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_obsidian_destroyer\",\n                \"id\": 76,\n                \"localized_name\": \"殁境神蚀者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_lycan\",\n                \"id\": 77,\n                \"localized_name\": \"狼人\"\n            },\n            {\n                \"name\": \"npc_dota_hero_brewmaster\",\n                \"id\": 78,\n                \"localized_name\": \"酒仙\"\n            },\n            {\n                \"name\": \"npc_dota_hero_shadow_demon\",\n                \"id\": 79,\n                \"localized_name\": \"暗影恶魔\"\n            },\n            {\n                \"name\": \"npc_dota_hero_lone_druid\",\n                \"id\": 80,\n                \"localized_name\": \"德鲁伊\"\n            },\n            {\n                \"name\": \"npc_dota_hero_chaos_knight\",\n                \"id\": 81,\n                \"localized_name\": \"混沌骑士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_meepo\",\n                \"id\": 82,\n                \"localized_name\": \"米波\"\n            },\n            {\n                \"name\": \"npc_dota_hero_treant\",\n                \"id\": 83,\n                \"localized_name\": \"树精卫士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_ogre_magi\",\n                \"id\": 84,\n                \"localized_name\": \"食人魔魔法师\"\n            },\n            {\n                \"name\": \"npc_dota_hero_undying\",\n                \"id\": 85,\n                \"localized_name\": \"不朽尸王\"\n            },\n            {\n                \"name\": \"npc_dota_hero_rubick\",\n                \"id\": 86,\n                \"localized_name\": \"拉比克\"\n            },\n            {\n                \"name\": \"npc_dota_hero_disruptor\",\n                \"id\": 87,\n                \"localized_name\": \"干扰者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_nyx_assassin\",\n                \"id\": 88,\n                \"localized_name\": \"司夜刺客\"\n            },\n            {\n                \"name\": \"npc_dota_hero_naga_siren\",\n                \"id\": 89,\n                \"localized_name\": \"娜迦海妖\"\n            },\n            {\n                \"name\": \"npc_dota_hero_keeper_of_the_light\",\n                \"id\": 90,\n                \"localized_name\": \"光之守卫\"\n            },\n            {\n                \"name\": \"npc_dota_hero_wisp\",\n                \"id\": 91,\n                \"localized_name\": \"艾欧\"\n            },\n            {\n                \"name\": \"npc_dota_hero_visage\",\n                \"id\": 92,\n                \"localized_name\": \"维萨吉\"\n            },\n            {\n                \"name\": \"npc_dota_hero_slark\",\n                \"id\": 93,\n                \"localized_name\": \"斯拉克\"\n            },\n            {\n                \"name\": \"npc_dota_hero_medusa\",\n                \"id\": 94,\n                \"localized_name\": \"美杜莎\"\n            },\n            {\n                \"name\": \"npc_dota_hero_troll_warlord\",\n                \"id\": 95,\n                \"localized_name\": \"巨魔战将\"\n            },\n            {\n                \"name\": \"npc_dota_hero_centaur\",\n                \"id\": 96,\n                \"localized_name\": \"半人马战行者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_magnataur\",\n                \"id\": 97,\n                \"localized_name\": \"马格纳斯\"\n            },\n            {\n                \"name\": \"npc_dota_hero_shredder\",\n                \"id\": 98,\n                \"localized_name\": \"伐木机\"\n            },\n            {\n                \"name\": \"npc_dota_hero_bristleback\",\n                \"id\": 99,\n                \"localized_name\": \"钢背兽\"\n            },\n            {\n                \"name\": \"npc_dota_hero_tusk\",\n                \"id\": 100,\n                \"localized_name\": \"巨牙海民\"\n            },\n            {\n                \"name\": \"npc_dota_hero_skywrath_mage\",\n                \"id\": 101,\n                \"localized_name\": \"天怒法师\"\n            },\n            {\n                \"name\": \"npc_dota_hero_abaddon\",\n                \"id\": 102,\n                \"localized_name\": \"亚巴顿\"\n            },\n            {\n                \"name\": \"npc_dota_hero_elder_titan\",\n                \"id\": 103,\n                \"localized_name\": \"上古巨神\"\n            },\n            {\n                \"name\": \"npc_dota_hero_legion_commander\",\n                \"id\": 104,\n                \"localized_name\": \"军团指挥官\"\n            },\n            {\n                \"name\": \"npc_dota_hero_ember_spirit\",\n                \"id\": 106,\n                \"localized_name\": \"灰烬之灵\"\n            },\n            {\n                \"name\": \"npc_dota_hero_earth_spirit\",\n                \"id\": 107,\n                \"localized_name\": \"大地之灵\"\n            },\n            {\n                \"name\": \"npc_dota_hero_terrorblade\",\n                \"id\": 109,\n                \"localized_name\": \"恐怖利刃\"\n            },\n            {\n                \"name\": \"npc_dota_hero_phoenix\",\n                \"id\": 110,\n                \"localized_name\": \"凤凰\"\n            },\n            {\n                \"name\": \"npc_dota_hero_oracle\",\n                \"id\": 111,\n                \"localized_name\": \"神谕者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_techies\",\n                \"id\": 105,\n                \"localized_name\": \"工程师\"\n            },\n            {\n                \"name\": \"npc_dota_hero_winter_wyvern\",\n                \"id\": 112,\n                \"localized_name\": \"寒冬飞龙\"\n            },\n            {\n                \"name\": \"npc_dota_hero_arc_warden\",\n                \"id\": 113,\n                \"localized_name\": \"天穹守望者\"\n            },\n            {\n                \"name\": \"npc_dota_hero_abyssal_underlord\",\n                \"id\": 108,\n                \"localized_name\": \"孽主\"\n            },\n            {\n                \"name\": \"npc_dota_hero_monkey_king\",\n                \"id\": 114,\n                \"localized_name\": \"齐天大圣\"\n            },\n            {\n                \"name\": \"npc_dota_hero_pangolier\",\n                \"id\": 120,\n                \"localized_name\": \"石鳞剑士\"\n            },\n            {\n                \"name\": \"npc_dota_hero_dark_willow\",\n                \"id\": 119,\n                \"localized_name\": \"邪影芳灵\"\n            },\n            {\n                \"name\": \"npc_dota_hero_grimstroke\",\n                \"id\": 121,\n                \"localized_name\": \"天涯墨客\"\n            },\n            {\n                \"name\": \"npc_dota_hero_mars\",\n                \"id\": 129,\n                \"localized_name\": \"玛尔斯\"\n            },\n            {\n                \"name\": \"npc_dota_hero_void_spirit\",\n                \"id\": 126,\n                \"localized_name\": \"虚无之灵\"\n            },\n            {\n                \"name\": \"npc_dota_hero_snapfire\",\n                \"id\": 128,\n                \"localized_name\": \"电炎绝手\"\n            },\n            {\n                \"name\": \"npc_dota_hero_hoodwink\",\n                \"id\": 123,\n                \"localized_name\": \"森海飞霞\"\n            },\n            {\n                \"name\": \"npc_dota_hero_dawnbreaker\",\n                \"id\": 135,\n                \"localized_name\": \"破晓辰星\"\n            }\n        ],\n        \"status\": 200,\n        \"count\": 121\n    }\n}"
)

func rank(id int) string {
	rankName := map[int]string{
		1: "先锋",
		2: "卫士",
		3: "中军",
		4: "统帅",
		5: "传奇",
		6: "万古",
		7: "超凡",
		8: "冠绝",
	}
	return rankName[id/10]
}

func (d *D2Statics) parseHeroStat() {
	hStats, _, err := d.odClient.HeroStatService.HeroStats()

	if err != nil {
		d.log("parse hero stat error: %v", err)
		return
	}

	for _, hero := range hStats {
		d.heroStat[hero.HeroID] = hero
	}
}

func parseHeroes() map[int]string {
	type Hero struct {
		ID   int    `json:"id"`
		Name string `json:"localized_name"`
	}

	type Result struct {
		Heroes []Hero `json:"heroes"`
	}

	type H struct {
		R Result `json:"result"`
	}

	h := &H{}

	_ = json.Unmarshal(convert.StringToByte(heroes), h)

	m := make(map[int]string)

	for _, value := range h.R.Heroes {
		m[value.ID] = value.Name
	}

	return m
}
